#!/usr/bin/env ruby

require 'fileutils'

ignores = %w(bin)
files = Dir['*'] - ignores
home = File.expand_path '~'

files.each do |file|
  path = File.join home, ".#{file}"
  if File.exist? path
    puts "\e[1;31mConflict\e[0m #{path}"
    print "\e[1;33mOverwrite\e[0m #{path}? [yN] "
    next unless gets.strip.downcase == 'y'
  end

  puts "\e[1;32mLink\e[0m #{path}"
  FileUtils.ln_sf File.expand_path(file), path
end
